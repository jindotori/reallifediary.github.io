---
title: Software Refactoring
layout: post
summary: Software Refactoring
featured-img: refactoring
---

## 리팩토링 목적

- 버그를 발견하기 쉽게 만든다.
- 기능을 추가하기 쉽게 만든다.
- 리뷰하기 쉽게 만든다.

## 리팩토링이 필요한 부분을 '악취'가 난다고 한다.

- 이해하기 어려운 부분.
- 수정하기 어려운 부분.
- 확장하기 어려운 부분.

## 악취를 나타내는 말

- 겹친다. (중복코드) -> 메서드 추출, 클래스 추츨, 널 객체 도입, 에러 코드를 예외 처리
- 너무 길다. -> 메서드 추출, 클래스 추츨
- 너무 많다. -> 중개자 제거, 클래스 인라인화, 메서드 인라인화
- 이름이 안맞는다. -> 메서드 추출, 메서드명 변경, 설명용 변수 도입, 임시 변수 분리
- 너무 공개적이다. -> 필드 캡슐화, 생성자를 팩토리 메서드로 치환
- 객체 지향답지 않다. -> 분류 코드를 클래스로 치환, 분류 코드를 하위 클래스로 치환

## 리팩토링 카탈로그
- 리팩토링의 목적과 절차를 카탈로그 형식으로 정리.
- <http://www.refactoring.com>

## 리팩토링 에센스
#### 스텝 바이 스텝
  - 두 가지 수정을 한꺼번에 하지 않기.
- 되돌리기 쉽게 하기.
  - 리팩토링 했지만 문제가 생겨서 쉽게 되돌려야 하기 위함.
- 단계마다 확인.
  - 각 단계마다 제대로 되고 있는 지 확인.
- 오래된 걸 새로운 걸로 바꿈.
  - 동작 상태를 유지하면서 새로운 코드를 추가해서 오래된 것이 모두 새로워지면 오래된 것을 제거함.


## 매직 넘버를 기호 상수로 치환

#### 매직 넘버를 써서 안될 이유
- 매직 넘버의 이유를 알기 어렵다.
- 매직 넘버는 수정하기 어려움.

#### 리팩토링 실행
1. 기호 상수 선언
- public static final 클래스 필드 사용하기(클래스 안에서만 사용할 경우 private 선)
- enum 사용하기
2. 기호 상수에 의존하는 다른 매직 넘버를 기호 상수 표현식으로 변환.

잘못한 예제)
~~~
public static final int MAX_INPUT_LENGTH = 100;
public static final int WORK_AREA_LENGTH = 200;
~~~

잘한 예제)
~~~
public static final int MAX_INPUT_LENGTH = 100;
public static final int WORK_AREA_LENGTH = MAX_INPUT_LENGTH * 2;
~~~
